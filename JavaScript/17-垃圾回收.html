<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>垃圾回收</title>
</head>
<body>
    
    <script>
        /*
            对于JavaScript来说 内存管理是自动的，不需要我们对它进行干预

            可达性：（Reachability）
                主要概念是可达性
            固有可达值的基本集合
            1.当前执行的函数，它的局部变量和参数
            2.当前嵌套调用链上的其他函数、它们的局部变量和参数
            3.全局变量
            4.内部的

            这些值被称为根 roots
            如果一个值可通过引用链从根访问其他值，则该值是可达的。
                比如一个对象引用了另一个对象那么该对象为可达，引用内容也是可达的

            在JavaScript引擎中有一个被称为垃圾回收器的东西在后台执行，它监控着所有对象的状态，并删除掉那些已经不可达的


            内部算法
                垃圾回收的基本算法被称为；mark-and-sweep

                执行步骤：
                垃圾收集器找到所有的根，并标记它们
                遍历并标记来自它们的所有引用
                遍历标记对象并标记它们的引用，所有的被遍历到的对象都会被记住，以免重复标记
                直到所有可达的(从根部)引用都被访问到
                没有被标记到的对象都会被删除
            你可以将这个流程比作长江，长江水流到的河道就是再用的 ，没有流经的就是弃用的

            优化:
            1.分代收集 对象被分成两组，新的和旧的。一些旧的对象被检查的频次会被降低
            2.增量收集 将大的对象集拆分成小的 这样也会产生小的垃圾回收机制。
            3.闲时收集：垃圾收集器只会在CPU空闲时尝试运行，以减少可能对代码产生的影响

            这只是垃圾回收的冰山一角，垃圾回收机制的高级算法需要熟悉底层编程，关于V8引擎垃圾回收期的详细文章
            https://jayconrod.com/posts/55/a-tour-of-v8-garbage-collection


            总结：
            1.垃圾回收是自动完成的，不能强制执行或是阻止执行
            2.当对象是可达状态时，他一定存在于内存中
            3.被引用与可访问（从一个根）不同：一组相互连接的对象可能整体都不可达。
        */
    </script>
</body>
</html>