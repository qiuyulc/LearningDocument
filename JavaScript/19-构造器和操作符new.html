<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>构造器和操作符new</title>
</head>
<body>
    <script>
        /*
            构造函数

            function User(name){
                this.name = name;
                this.isAdmin = false;

            }

            let user = new User('Jack');

            alert(user.name);Jack
            alert(user.isAdin); false

            当一个函数被使用new 操作符执行时

            1.一个新的空对象被创建并分配给this
            2.函数体执行。通常它会修改this，为其添加新的属性
            3.返回this的值

            等同于这个
            function User(name) {
                // this = {};（隐式创建）

                // 添加属性到 this
                this.name = name;
                this.isAdmin = false;

                // return this;（隐式返回）
            }
        
            构造器的主要目的--实现可重用的对象创建代码

            除了箭头函数，任何函数都是可以用作构造器，即可以通过new来运行。首字母大写是一个共同的约定

            构造器模式测试：new.target

            在一个函数内部，我们可以使用new.target属性来检查他是否被使用
            new进行调用了
            对于常规调用 他为undefined 对于使用new的调用，则等于该函数

            function User() {
            alert(new.target);
            }

            // 不带 "new"：
            User(); // undefined

            // 带 "new"：
            new User(); // function User { ... }

            可以用在函数内，比如当函数没有被new调用时 我们可以替他new一下
            function User(name) {
            if (!new.target) { // 如果你没有通过 new 运行我
                return new User(name); // ……我会给你添加 new
            }

            this.name = name;
            }

            let john = User("John"); // 将调用重定向到新用户
            alert(john.name); // John

        */
    </script>
</body>
</html>